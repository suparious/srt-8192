version: '3.9'

services:
  game-logic:
    build: ./services/game-logic-service
    ports: ["5001:5001"]
    env_file: ./services/game-logic-service/.env
    depends_on: [mongodb, redis]

  ai-service:
    build: ./services/ai-service
    ports: ["5002:5002"]
    env_file: ./services/ai-service/.env
    depends_on: [mongodb]

  data-integration:
    build: ./services/data-integration
    ports: ["5003:5003"]
    env_file: ./services/data-integration/.env
    depends_on: [mongodb]

  economy:
    build: ./services/economy-management
    ports: ["5004:5004"]
    env_file: ./services/economy-management/.env
    depends_on: [mongodb]

  leaderboard:
    build: ./services/leaderboard-service
    ports: ["5005:5005"]
    env_file: ./services/leaderboard-service/.env
    depends_on: [mongodb]

  matchmaking:
    build: ./services/matchmaking-service
    ports: ["5006:5006"]
    env_file: ./services/matchmaking-service/.env
    depends_on: [redis]

  notifications:
    build: ./services/notification-service
    ports: ["5007:5007"]
    env_file: ./services/notification-service/.env
    depends_on: [redis]

  persistence:
    build: ./services/persistence-service
    ports: ["5008:5008"]
    env_file: ./services/persistence-service/.env
    depends_on: [mongodb]

  rewards:
    build: ./services/rewards-service
    ports: ["5009:5009"]
    env_file: ./services/rewards-service/.env
    depends_on: [mongodb]

  social:
    build: ./services/social-service
    ports: ["5010:5010"]
    env_file: ./services/social-service/.env
    depends_on: [mongodb, redis]

  tutorial:
    build: ./services/tutorial-service
    ports: ["5011:5011"]
    env_file: ./services/tutorial-service/.env
    depends_on: [mongodb]

  user:
    build: ./services/user-service
    ports: ["5012:5012"]
    env_file: ./services/user-service/.env
    depends_on: [mongodb]

  mongodb:
    image: mongo:latest
    ports: ["27017:27017"]
    volumes: [mongodb_data:/data/db]

  redis:
    image: redis:alpine
    ports: ["6379:6379"]
    volumes: [redis_data:/data]

volumes:
  mongodb_data:
  redis_data:

networks:
  default:
    name: srt-8192-network